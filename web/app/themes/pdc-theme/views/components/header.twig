<header class="glass-effect border-b border-card-border fixed top-0 left-0 right-0 z-50">
    <nav class="container mx-auto px-6">
        <div class="relative flex justify-between items-center py-8">
            <div class="w-36">
                <a href="{{ site.url }}" class="absolute top-0 left-0 block hover:scale-105 transition-transform duration-300">
                    <img src="{{ site.theme.uri }}/public/img/PauperDuelCommander.png"
                         alt="{{ site.name }}"
                         class="h-36 drop-shadow-[0_0_12px_rgba(255,87,34,0.2)]">
                </a>
            </div>

            {# Burger button - visible only on mobile #}
            <button id="mobile-menu-button" class="md:hidden flex items-center justify-center w-10 h-10 text-brand-orange hover:bg-brand-orange/10 rounded-lg transition-colors" aria-label="Toggle menu">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path id="burger-open" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    <path id="burger-close" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>

            {# Desktop Menu - hidden on mobile #}
            <div class="hidden md:flex items-center gap-8">
                {% if menu and menu.items %}
                    <ul class="flex items-center space-x-6">
                        {% for item in menu.items %}
                            <li>
                                <a href="{{ item.url }}"
                                   class="relative font-heading font-bold uppercase text-md text-text-secondary hover:text-brand-orange transition-colors duration-300 group {{ item.current ? 'text-brand-orange' : '' }}">
                                    {{ item.title }}
                                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-orange group-hover:w-full transition-all duration-300 {{ item.current ? 'w-full' : '' }}"></span>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    {# Debug: afficher un message si le menu n'existe pas #}
                    <div class="text-xs text-text-muted px-4 py-2 border border-brand-orange/20 rounded-lg">
                        {{ __('Menu non configuré') }}
                    </div>
                {% endif %}

                {# Language Switcher (Polylang) - Native Select #}
                {% if function('function_exists', 'pll_the_languages') and function('pll_languages_list') %}
                    {% set all_languages = function('pll_the_languages', {
                        'dropdown': 0,
                        'show_flags': 0,
                        'show_names': 1,
                        'hide_current': 0,
                        'hide_if_no_translation': 0,
                        'force_home': 0,
                        'echo': 0,
                        'raw': 1
                    }) %}
                    {% if all_languages %}
                        <select onchange="window.location.href=this.value"
                                class="px-3 py-2 border border-brand-orange/30 hover:border-brand-orange transition-all duration-300 bg-brand-orange/5 hover:bg-brand-orange/10 rounded-lg font-heading font-bold uppercase text-brand-orange text-xs tracking-wider cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-orange/50">
                            {% for lang in all_languages %}
                                <option value="{{ lang.url }}" {{ lang.current_lang ? 'selected' : '' }}>
                                    {{ lang.slug|upper }}
                                </option>
                            {% endfor %}
                        </select>
                    {% endif %}
                {% elseif function('function_exists', 'pll_the_languages') %}
                    {# Polylang installé mais pas configuré #}
                    <div class="text-xs text-text-muted px-4 py-2 border border-brand-orange/20 rounded-lg">
                        {{ __('Langues non configurées') }}
                    </div>
                {% endif %}
            </div>
        </div>
    </nav>
</header>

{# Mobile Menu Overlay - outside header for proper z-index stacking #}
<div id="mobile-menu" class="fixed inset-0 md:hidden hidden" style="background-color: #0A0E13; z-index: 9999;">
    <div class="container mx-auto px-6 py-8 h-full flex flex-col">
        {# Close button #}
        <div class="flex justify-between items-center mb-12">
            <a href="{{ site.url }}" class="block">
                <img src="{{ site.theme.uri }}/public/img/PauperDuelCommander.png"
                     alt="{{ site.name }}"
                     class="h-20 drop-shadow-[0_0_12px_rgba(255,87,34,0.2)]">
            </a>
            <button id="mobile-menu-close" class="flex items-center justify-center w-10 h-10 text-brand-orange hover:bg-brand-orange/10 rounded-lg transition-colors" aria-label="Close menu">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>

        {# Mobile Navigation #}
        {% if menu and menu.items %}
            <ul class="flex flex-col space-y-6 mb-12">
                {% for item in menu.items %}
                    <li>
                        <a href="{{ item.url }}"
                           class="block font-heading font-bold uppercase text-2xl text-text-secondary hover:text-brand-orange transition-colors duration-300 {{ item.current ? 'text-brand-orange' : '' }}">
                            {{ item.title }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}

        {# Mobile Language Switcher #}
        {% if function('function_exists', 'pll_the_languages') and function('pll_languages_list') %}
            <div class="mt-auto pt-8 border-t border-brand-orange/20">
                <p class="text-xs uppercase text-text-muted mb-4 font-heading font-bold tracking-wider">{{ __('Langue') }}</p>
                {% set all_languages_mobile = function('pll_the_languages', {
                    'dropdown': 0,
                    'show_flags': 0,
                    'show_names': 1,
                    'hide_current': 0,
                    'hide_if_no_translation': 0,
                    'force_home': 0,
                    'echo': 0,
                    'raw': 1
                }) %}
                {% if all_languages_mobile %}
                    <select onchange="window.location.href=this.value"
                            class="w-full px-4 py-3 border border-brand-orange/30 hover:border-brand-orange transition-all duration-300 bg-brand-orange/5 hover:bg-brand-orange/10 rounded-lg font-heading font-bold uppercase text-brand-orange text-sm tracking-wider cursor-pointer focus:outline-none focus:ring-2 focus:ring-brand-orange/50">
                        {% for lang in all_languages_mobile %}
                            <option value="{{ lang.url }}" {{ lang.current_lang ? 'selected' : '' }}>
                                {{ lang.name }}
                            </option>
                        {% endfor %}
                    </select>
                {% endif %}
            </div>
        {% endif %}
    </div>
</div>
